<!DOCTYPE html>
<html lang="es" data-theme-initialized="false">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página Dinámica</title>
    
    <style>
        /* Estilos generales */
        body {
            font-family: sans-serif;
            background-color: #f4f4f4;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1, h2, h3 {
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        button {
            padding: 10px 15px;
            border: none;
            background-color: #007bff;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.2s ease;
        }
        button:hover {
            background-color: #0056b3;
        }

        hr {
            border: none;
            border-top: 1px solid #eee;
            margin: 40px 0;
        }

        /* --- Estilos para las Pestañas (Tabs) --- */
        .tab-container {
            overflow: hidden;
            border: 1px solid #ccc;
            background-color: #f1f1f1;
            border-radius: 5px 5px 0 0;
        }
        .tab-container button {
            background-color: inherit;
            color: #333;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
            border-radius: 0;
        }
        .tab-container button:hover {
            background-color: #ddd;
        }
        .tab-container button.active {
            background-color: #ccc;
            font-weight: bold;
        }
        .tab-content {
            display: none; /* Oculto por defecto */
            padding: 12px;
            border: 1px solid #ccc;
            border-top: none;
            border-radius: 0 0 5px 5px;
        }
        .tab-content.active {
            display: block; /* Muestra el contenido activo */
        }

        /* --- Estilos para la Ventana Modal --- */
        .modal {
            display: none; /* Oculto por defecto */
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: 8px;
            position: relative;
        }
        .close-button {
            color: #aaa;
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close-button:hover,
        .close-button:focus {
            color: black;
        }

        /* --- Estilos para elementos de prueba adicionales --- */
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            align-items: start;
        }
        .test-card {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
        }
        .test-card h3 {
            margin-top: 0;
        }
        .background-image-test {
            height: 100px;
            background-image: url('https://github.com/HectorDanielAyarachiFuentes/fotos-dulce/blob/main/Fotos-Dulce/Dulce-corazones.jpg?raw=true');
            background-size: cover;
            background-position: center;
            border-radius: 4px;
            color: white;
            text-shadow: 1px 1px 3px black;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .gradient-background-test {
            height: 100px;
            background: linear-gradient(45deg, #ff8a00, #e52e71);
            border-radius: 4px;
        }
        blockquote {
            border-left: 5px solid #007bff;
            padding-left: 15px;
            margin-left: 0;
            font-style: italic;
            position: relative;
        }
        blockquote::before, blockquote::after {
            font-family: "Georgia", serif;
            font-size: 3em;
            color: #007bff;
            opacity: 0.2;
            position: absolute;
        }
        blockquote::before { content: '“'; left: -15px; top: -10px; }
        blockquote::after { content: '”'; right: 0; bottom: -30px; }

        .icon-test {
            width: 24px;
            height: 24px;
            /* El color se hereda y debe ser invertido por el script */
            color: #333;
        }

        /* --- Estilos para Desafíos Nivel Experto --- */
        ::selection {
            background-color: #ffc107; /* Amarillo para selección */
            color: #333;
        }

        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 5px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        .blend-mode-container {
            position: relative;
            height: 120px;
            background-color: #f0f0f0;
            border-radius: 4px;
            padding: 10px;
        }
        .blend-box {
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            mix-blend-mode: screen; /* Modo de fusión que puede dar problemas */
        }
        .blend-box.red { background-color: #ff4136; top: 10px; left: 20px; }
        .blend-box.blue { background-color: #0074d9; top: 30px; left: 60px; }

        .pre-filtered-test {
            width: 100%;
            height: 80px;
            background: linear-gradient(90deg, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff);
            filter: grayscale(1) blur(1px); /* Filtro preexistente */
            border-radius: 4px;
        }

        .custom-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        .custom-table caption {
            caption-side: bottom;
            font-size: 0.9em;
            color: #666;
            margin-top: 8px;
        }
        .custom-table th, .custom-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        .custom-table thead { background-color: #f2f2f2; }
        .custom-table tbody tr:nth-child(even) { background-color: #f9f9f9; }

        /* --- Estilos para Desafíos Nivel Pesadilla --- */
        .nightmare-card {
            border: 1px dashed #ff4136; /* Borde rojo para destacar */
            padding: 15px;
            border-radius: 5px;
            background-color: rgba(255, 65, 54, 0.05);
        }
        .nightmare-card h3 {
            color: #b22222;
        }

        .backdrop-container {
            position: relative;
            height: 150px;
            background-image: url('https://github.com/HectorDanielAyarachiFuentes/fotos-dulce/blob/main/Fotos-Dulce/Dulce-sentada.jpg?raw=true');
            background-size: cover;
            padding: 10px;
            border-radius: 4px;
            overflow: hidden;
        }
        .backdrop-element {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            bottom: 20px;
            background-color: rgba(255, 255, 255, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: 4px;
            -webkit-backdrop-filter: blur(5px); /* Para Safari */
            backdrop-filter: blur(5px); /* El desafío principal */
            display: flex;
            align-items: center;
            justify-content: center;
            color: #111;
            font-weight: bold;
            text-shadow: 0 0 5px white;
        }

        .sticky-container {
            height: 150px;
            overflow-y: scroll;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .sticky-header {
            position: -webkit-sticky; /* Para Safari */
            position: sticky;
            top: 0;
            background-color: #e9ecef;
            padding: 8px;
            font-weight: bold;
            border-bottom: 1px solid #ccc;
        }

        .css-animation-test {
            width: 60px;
            height: 60px;
            background-color: #9b59b6;
            animation: pulse-and-rotate 3s infinite ease-in-out;
        }
        @keyframes pulse-and-rotate {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 1; }
            50% { transform: scale(0.8) rotate(180deg); opacity: 0.7; }
        }

        .clip-path-test {
            --clip-bg-color: #2ecc71; /* Variable CSS para el color */
            width: 100%;
            height: 80px;
            background-color: var(--clip-bg-color);
            clip-path: polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%);
        }

        /* --- Estilos para Desafíos Nivel Ultra Hard --- */
        .ultra-hard-card {
            border: 2px solid #663399; /* Rebecca Purple */
            padding: 15px;
            border-radius: 5px;
            background-color: rgba(102, 51, 153, 0.05);
        }
        .ultra-hard-card h3 {
            color: #4d2673;
        }

        .scene-3d {
            width: 100px;
            height: 100px;
            perspective: 400px;
            margin: 20px auto;
        }
        .cube-3d {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            animation: rotate-cube 8s infinite linear;
        }
        .cube-face {
            position: absolute;
            width: 100px;
            height: 100px;
            border: 1px solid #333;
            font-size: 12px;
            text-align: center;
            line-height: 100px;
            background-color: rgba(0, 123, 255, 0.7);
            color: white;
        }
        .face-front  { transform: rotateY(  0deg) translateZ(50px); }
        .face-back   { transform: rotateY(180deg) translateZ(50px); }
        .face-right  { transform: rotateY( 90deg) translateZ(50px); }
        .face-left   { transform: rotateY(-90deg) translateZ(50px); }
        .face-top    { transform: rotateX( 90deg) translateZ(50px); }
        .face-bottom { transform: rotateX(-90deg) translateZ(50px); }

        @keyframes rotate-cube {
            from { transform: rotateX(0deg) rotateY(0deg); }
            to   { transform: rotateX(360deg) rotateY(360deg); }
        }

        .mask-image-test {
            width: 100%;
            height: 100px;
            background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
            -webkit-mask-image: linear-gradient(to right, transparent 0%, black 50%, transparent 100%);
            mask-image: linear-gradient(to right, transparent 0%, black 50%, transparent 100%);
        }

        .scroll-animation-container {
            height: 150px;
            overflow-y: scroll;
            border: 1px solid #ccc;
            border-radius: 4px;
            /* Define un nombre para la línea de tiempo de scroll */
            scroll-timeline-name: --scroll-timeline;
        }
        .scroll-progress-bar {
            width: 100%;
            height: 20px;
            background-color: #e9ecef;
            border-radius: 4px;
        }
        .scroll-progress-bar-inner {
            height: 100%;
            background-color: #007bff;
            border-radius: 4px;
            /* Vincula la animación a la línea de tiempo de scroll */
            animation: progress-scroll linear forwards;
            animation-timeline: --scroll-timeline;
        }
        @keyframes progress-scroll {
            from { width: 0%; }
            to   { width: 100%; }
        }

        .houdini-paint-test {
            width: 100%;
            height: 100px;
            /* Llama al worklet de pintura. El filtro no puede afectar esto. */
            background-image: paint(checkerboard);
        }

        /* --- Estilos para Desafíos Nivel DIOS --- */
        .god-level-card {
            border: 2px solid #ff00ff; /* Magenta para el nivel Dios */
            padding: 15px;
            border-radius: 5px;
            background-color: rgba(255, 0, 255, 0.05);
            overflow: hidden; /* Para contener elementos que se salen */
        }
        .god-level-card h3 {
            color: #990099;
        }

        /* Popover API */
        #my-popover {
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        /* Container Queries */
        .cq-container {
            container-type: inline-size;
            container-name: card-container;
            resize: horizontal;
            overflow: auto;
            border: 1px dashed #ccc;
            padding: 10px;
        }
        .cq-child {
            background-color: #d1e7dd;
            padding: 10px;
            border-radius: 4px;
        }
        @container card-container (min-width: 200px) {
            .cq-child {
                background-color: #f8d7da;
                font-weight: bold;
            }
        }

        /* Offset Path */
        .offset-path-container {
            position: relative;
            height: 100px;
        }
        .offset-path-element {
            width: 20px;
            height: 20px;
            background: #ffc107;
            border-radius: 50%;
            offset-path: path('M10,80 Q50,10 90,80 T170,80');
            animation: move-along-path 4s infinite ease-in-out;
        }
        @keyframes move-along-path {
            from { offset-distance: 0%; }
            to { offset-distance: 100%; }
        }

        /* color-mix() */
        .color-mix-test {
            height: 50px;
            background-color: color-mix(in srgb, #3498db 40%, #f1c40f);
            border-radius: 4px;
        }

        /* @property */
        @property --angle {
            syntax: '<angle>'; inherits: false; initial-value: 0deg;
        }
        .property-animation-test {
            height: 80px;
            background: conic-gradient(from var(--angle), #ff5733, #33ff57, #3357ff, #ff5733);
            animation: spin-angle 3s infinite linear;
            border-radius: 50%;
        }
        @keyframes spin-angle {
            to { --angle: 360deg; }
        }

        /* --- Estilos para Desafíos Nivel APOCALIPSIS --- */
        .apocalypse-card {
            border: 2px solid #000000;
            padding: 15px;
            border-radius: 5px;
            background-color: rgba(0, 0, 0, 0.05);
            grid-column: 1 / -1; /* Ocupa todo el ancho */
        }
        .apocalypse-card h3 {
            color: #000000;
            text-align: center;
            font-size: 1.5em;
        }
    </style>
    <style>
        .rainbow-palette-test {
            height: 100px;
            background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #ee82ee);
            border-radius: 4px;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 3px black;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Demostración de Componentes Dinámicos</h1>
        <hr>

        <h2>Pestañas</h2>
        <div class="tab-container">
            <button class="tab-link active" data-tab="tab1">Información</button>
            <button class="tab-link" data-tab="tab2">Especificaciones</button>
            <button class="tab-link" data-tab="tab3">Contacto</button>
        </div>

        <div id="tab1" class="tab-content active">
            <h3>Información General</h3>
            <p>Este es el contenido de la primera pestaña. Aquí puedes poner cualquier información que desees.</p>
        </div>
        <div id="tab2" class="tab-content">
            <h3>Especificaciones Técnicas</h3>
            <p>Contenido detallado sobre las especificaciones del producto o servicio.</p>
        </div>
        <div id="tab3" class="tab-content">
            <h3>Formulario de Contacto</h3>
            <p>Aquí podría ir un formulario para que los usuarios te contacten.</p>
        </div>
        
        <hr>

        <h2>Ventana Modal</h2>
        <p>Haz clic en el botón para abrir una ventana emergente (modal).</p>
        <button id="openModalBtn">Abrir Modal</button>

        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="close-button">&times;</span>
                <h2>Ventana Modal</h2>
                <p>Este es un mensaje importante que aparece en una ventana modal. Puedes cerrarla haciendo clic en la 'X' o fuera de este cuadro.</p>
            </div>
        </div>

        <hr>

        <h2>Más Componentes para Retar al Inversor</h2>
        <div class="test-grid">

            <div class="test-card">
                <h3>Imagen y Video</h3>
                <p>Las imágenes y videos no deberían invertirse, solo atenuarse.</p>
                <img src="https://github.com/HectorDanielAyarachiFuentes/fotos-dulce/blob/main/Fotos-Dulce/Dulce-3.jpg?raw=true" alt="Placeholder" style="max-width: 100%; border-radius: 4px;">
                <video controls muted loop style="max-width: 100%; margin-top: 10px; border-radius: 4px;">
                    <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
                    Tu navegador no soporta el tag de video.
                </video>
            </div>

            <div class="test-card">
                <h3>Iframe (YouTube)</h3>
                <p>Los iframes deben ser excluidos para funcionar correctamente.</p>
                <iframe width="100%" height="150" src="https://www.youtube.com/embed/9ZrqnZo_1TA?list=RD9ZrqnZo_1TA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="border-radius: 4px;"></iframe>
            </div>

            <div class="test-card">
                <h3>Fondos CSS</h3>
                <p>Imagen de fondo (debe ser excluida por el selector `[style*=background-image]`):</p>
                <div class="background-image-test">Texto sobre imagen</div>
                <p style="margin-top: 10px;">Fondo con degradado (los colores se alterarán con `hue-rotate`):</p>
                <div class="gradient-background-test"></div>
            </div>

            <div class="test-card">
                <h3>Pseudo-elementos</h3>
                <p>Las comillas y el borde de este bloque se crean con CSS.</p>
                <blockquote>La simplicidad es la máxima sofisticación.</blockquote>
            </div>

            <div class="test-card">
                <h3>Iconos SVG</h3>
                <p>Icono simple (debe cambiar de color como el texto):</p>
                <svg class="icon-test" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/></svg>
                <p>Gráfico SVG complejo (debe invertirse como una imagen):</p>
                <svg viewBox="0 0 100 50" style="width: 100%; height: auto;">
                    <rect width="100" height="50" fill="#f0f0f0"/>
                    <circle cx="25" cy="25" r="20" fill="#ff6347"/>
                    <rect x="60" y="10" width="30" height="30" fill="#4682b4" stroke="black" stroke-width="1"/>
                </svg>
            </div>

            <div class="test-card" data-theme-exclude>
                <h3>Exclusión Manual</h3>
                <p>Este cuadro tiene `data-theme-exclude`, por lo que <strong>nunca</strong> debería cambiar su apariencia.</p>
                <button>Botón Normal</button>
            </div>

            <div class="test-card">
                <h3>Canvas</h3>
                <p>El contenido de Canvas se dibuja con JS y no es afectado por filtros CSS.</p>
                <canvas id="myCanvas" width="200" height="100" style="border:1px solid #000000;"></canvas>
            </div>

            <div class="test-card">
                <h3>Elementos de Formulario</h3>
                <form onsubmit="event.preventDefault();">
                    <label for="texto">Input de texto:</label>
                    <input type="text" id="texto" placeholder="Escribe algo..." style="width: 90%; margin-bottom: 10px;">
                    
                    <label for="selector">Selector:</label>
                    <select id="selector" style="width: 100%; margin-bottom: 10px;">
                        <option>Opción 1</option>
                        <option>Opción 2</option>
                    </select>

                    <label for="progreso">Barra de progreso:</label>
                    <progress id="progreso" value="70" max="100" style="width: 100%; margin-bottom: 10px;"></progress>

                    <input type="checkbox" id="check1"> <label for="check1">Checkbox</label><br>
                    <input type="radio" id="radio1" name="radio"> <label for="radio1">Radio 1</label>
                </form>
            </div>

            <div class="test-card" style="grid-column: 1 / -1;">
                <h3>Paleta de Colores Arcoíris</h3>
                <p>Un degradado con todos los colores del arcoíris para probar la rotación de matiz (`hue-rotate`).</p>
                <div class="rainbow-palette-test">
                    El modo oscuro debería rotar estos colores.
                </div>
            </div>
        </div>

        <hr>

        <h2>Desafíos Nivel Experto</h2>
        <div class="test-grid">

            <div class="test-card">
                <h3>Shadow DOM</h3>
                <p>Este componente usa Shadow DOM. El filtro global debería afectarlo, pero los estilos internos están encapsulados.</p>
                <shadow-dom-test></shadow-dom-test>
            </div>

            <div class="test-card">
                <h3><code>mix-blend-mode</code></h3>
                <p>La inversión de color puede causar resultados extraños con los modos de fusión.</p>
                <div class="blend-mode-container">
                    <div class="blend-box red"></div>
                    <div class="blend-box blue"></div>
                </div>
            </div>

            <div class="test-card">
                <h3>Filtro CSS Preexistente</h3>
                <p>Este elemento ya tiene `filter: grayscale`. El filtro de inversión se apilará sobre él.</p>
                <div class="pre-filtered-test"></div>
            </div>

            <div class="test-card">
                <h3>Tabla Compleja</h3>
                <p>Las tablas con bordes y colores de fila alternos son un buen reto.</p>
                <table class="custom-table">
                    <caption>Lista de usuarios</caption>
                    <thead>
                        <tr><th>ID</th><th>Nombre</th><th>Rol</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>1</td><td>Ana</td><td>Admin</td></tr>
                        <tr><td>2</td><td>Luis</td><td>Editor</td></tr>
                        <tr><td>3</td><td>Eva</td><td>Lector</td></tr>
                    </tbody>
                </table>
            </div>

            <div class="test-card">
                <h3>Formularios (Deshabilitados)</h3>
                <p>Los elementos deshabilitados tienen estilos propios del navegador que pueden ser difíciles de invertir.</p>
                <form onsubmit="event.preventDefault();">
                    <input type="text" placeholder="No puedes escribir aquí" disabled style="width: 90%; margin-bottom: 10px;"><br>
                    <button type="button" disabled>Botón Deshabilitado</button>
                </form>
            </div>

        </div>

        <hr>

        <h2>Desafíos Nivel Pesadilla</h2>
        <div class="test-grid">

            <div class="nightmare-card">
                <h3><code>backdrop-filter</code></h3>
                <p>Un elemento con fondo semitransparente que desenfoca la imagen de detrás. La interacción de filtros es la pesadilla.</p>
                <div class="backdrop-container">
                    <div class="backdrop-element">Soy un fantasma</div>
                </div>
            </div>

            <div class="nightmare-card">
                <h3><code>position: sticky</code></h3>
                <p>Haz scroll dentro de este cuadro. La cabecera debe "pegarse" arriba, probando el repintado con filtro.</p>
                <div class="sticky-container">
                    <div class="sticky-header">Soy Pegajoso</div>
                    <p style="padding: 10px;">Contenido de prueba para generar scroll. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non risus. Suspendisse lectus tortor, dignissim sit amet, adipiscing nec, ultricies sed, dolor. Cras elementum ultrices diam. Maecenas ligula massa, varius a, semper congue, euismod non, mi.</p>
                </div>
            </div>

            <div class="nightmare-card">
                <h3>Animación CSS</h3>
                <p>Este cuadro tiene una animación de `transform` y `opacity`. ¿Hay lag o glitches al cambiar de tema?</p>
                <div class="css-animation-test"></div>
            </div>

            <div class="nightmare-card">
                <h3><code>&lt;details&gt;</code> y <code>&lt;summary&gt;</code></h3>
                <p>El marcador de flecha es un elemento nativo del navegador, difícil de invertir.</p>
                <details>
                    <summary>Haz clic para expandir</summary>
                    <p>Este es el contenido oculto. ¡Sorpresa!</p>
                </details>
            </div>

            <div class="nightmare-card">
                <h3><code>clip-path</code> y Variables</h3>
                <p>Una forma compleja cuyo color viene de una variable CSS. El filtro debe respetar la forma.</p>
                <div class="clip-path-test"></div>
            </div>

            <div class="nightmare-card">
                <h3><code>writing-mode</code></h3>
                <p style="writing-mode: vertical-rl; text-orientation: mixed; height: 120px; margin: auto;">Este texto es vertical.</p>
            </div>
        </div>

        <hr>

        <h2>Desafíos Nivel Ultra Hard</h2>
        <div class="test-grid">

            <div class="ultra-hard-card">
                <h3>Transformaciones 3D</h3>
                <p>Un cubo 3D animado. Prueba de fuego para el rendimiento y los contextos de apilamiento.</p>
                <div class="scene-3d">
                    <div class="cube-3d">
                        <div class="cube-face face-front">Front</div>
                        <div class="cube-face face-back">Back</div>
                        <div class="cube-face face-right">Right</div>
                        <div class="cube-face face-left">Left</div>
                        <div class="cube-face face-top">Top</div>
                        <div class="cube-face face-bottom">Bottom</div>
                    </div>
                </div>
            </div>

            <div class="ultra-hard-card">
                <h3><code>mask-image</code></h3>
                <p>Este degradado está enmascarado. El filtro debe respetar las áreas visibles y semi-transparentes.</p>
                <div class="mask-image-test"></div>
            </div>

            <div class="ultra-hard-card">
                <h3>Animación por Scroll</h3>
                <p>Haz scroll en este cuadro. La barra de progreso se anima con CSS `animation-timeline`.</p>
                <div class="scroll-animation-container">
                    <div class="scroll-progress-bar">
                        <div class="scroll-progress-bar-inner"></div>
                    </div>
                    <p style="padding: 10px; height: 300px;">Mucho...<br>...contenido...<br>...para...<br>...hacer...<br>...scroll.</p>
                </div>
            </div>

            <div class="ultra-hard-card">
                <h3>CSS Houdini (Paint API)</h3>
                <p>Este fondo de tablero de ajedrez se dibuja con JS. El filtro global no puede invertirlo.</p>
                <div class="houdini-paint-test"></div>
            </div>

            <div class="ultra-hard-card">
                <h3><code>will-change</code></h3>
                <p>Este elemento usa `will-change`, una optimización que puede causar glitches con filtros.</p>
                <div style="will-change: transform; background-color: #ff6347; color: white; padding: 10px; border-radius: 4px;">Paso el ratón por encima para activar la transición.</div>
            </div>

        </div>

        <hr>

        <h2>Desafíos Nivel DIOS</h2>
        <div class="test-grid">

            <div class="god-level-card">
                <h3>Popover API</h3>
                <p>Un elemento nativo en la capa superior. ¿Lo detecta el script como un modal?</p>
                <button popovertarget="my-popover">Mostrar Popover</button>
                <div id="my-popover" popover>
                    <h4>¡Soy un Popover!</h4>
                    <p>Me renderizo en la `@top-layer`.</p>
                    <button popovertarget="my-popover" popovertargetaction="hide">Cerrar</button>
                </div>
            </div>

            <div class="god-level-card">
                <h3>Container Queries</h3>
                <p>El fondo de este cuadro cambia si su contenedor es >200px. Arrastra la esquina para probar.</p>
                <div class="cq-container">
                    <div class="cq-child">Soy un hijo sensible al contenedor.</div>
                </div>
            </div>

            <div class="god-level-card">
                <h3>Animación <code>offset-path</code></h3>
                <p>Este punto se anima sobre una trayectoria SVG. ¡Prueba de rendimiento!</p>
                <div class="offset-path-container">
                    <div class="offset-path-element"></div>
                </div>
            </div>

            <div class="god-level-card">
                <h3>Función <code>color-mix()</code></h3>
                <p>El color de este fondo se genera con `color-mix()`.</p>
                <div class="color-mix-test"></div>
            </div>

            <div class="god-level-card">
                <h3>Houdini <code>@property</code></h3>
                <p>Este degradado cónico se anima usando una propiedad CSS personalizada.</p>
                <div class="property-animation-test"></div>
            </div>

        </div>

        <hr>

        <h2>Desafíos Nivel APOCALIPSIS</h2>
        <div class="test-grid">
            <div class="apocalypse-card">
                <h3>HTML dentro de HTML</h3>
                <p>El contenido dentro de un `iframe` o `object` es un documento separado y el filtro global no puede afectarlo. El script debe excluir el contenedor para evitar que se vea como un "negativo".</p>
                <div style="display: flex; gap: 20px; margin-top: 15px;">
                    <div style="flex: 1;">
                        <strong>Usando &lt;iframe&gt;:</strong>
                        <iframe src="nested.html" style="width: 100%; height: 180px; border: 1px solid #ccc; border-radius: 4px;"></iframe>
                    </div>
                    <div style="flex: 1;">
                        <strong>Usando &lt;object&gt;:</strong>
                        <object data="nested.html" type="text/html" style="width: 100%; height: 180px; border: 1px solid #ccc; border-radius: 4px;"></object>
                    </div>
                </div>
            </div>
        </div>

        <hr>

        <h2>Texto Dinámico (Span)</h2>
        <p>El dato actual es: <span id="dynamicText" style="font-weight: bold; color: #d9534f;">dato inicial</span></p>
        <button id="updateTextBtn">Actualizar Dato</button>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- Lógica para las PESTAÑAS ---
            const tabLinks = document.querySelectorAll('.tab-link');
            const tabContents = document.querySelectorAll('.tab-content');

            tabLinks.forEach(link => {
                link.addEventListener('click', () => {
                    const tabId = link.dataset.tab;

                    // Oculta todos los contenidos y quita la clase 'active' de los botones
                    tabContents.forEach(content => content.classList.remove('active'));
                    tabLinks.forEach(l => l.classList.remove('active'));

                    // Muestra el contenido de la pestaña seleccionada y activa su botón
                    document.getElementById(tabId).classList.add('active');
                    link.classList.add('active');
                });
            });


            // --- Lógica para la VENTANA MODAL ---
            const modal = document.getElementById('myModal');
            const openModalBtn = document.getElementById('openModalBtn');
            const closeModalBtn = document.querySelector('.close-button');

            // Abrir el modal
            openModalBtn.addEventListener('click', () => {
                modal.style.display = 'block';
            });

            // Cerrar el modal con el botón 'X'
            closeModalBtn.addEventListener('click', () => {
                modal.style.display = 'none';
            });

            // Cerrar el modal al hacer clic fuera del contenido
            window.addEventListener('click', (event) => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });


            // --- Lógica para el SPAN DINÁMICO ---
            const updateTextBtn = document.getElementById('updateTextBtn');
            const dynamicTextSpan = document.getElementById('dynamicText');
            let clickCount = 0;

            updateTextBtn.addEventListener('click', () => {
                clickCount++;
                dynamicTextSpan.textContent = `Actualizado ${clickCount} veces`;
            });

            // --- Lógica para el CANVAS ---
            const canvas = document.getElementById('myCanvas');
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = 'red';
            ctx.fillRect(10, 10, 50, 50);
            ctx.fillStyle = 'blue';
            ctx.font = '16px Arial';
            ctx.fillText('Hola Canvas', 70, 40);

            // --- Lógica para el Web Component (SHADOW DOM) ---
            class ShadowDomTest extends HTMLElement {
                constructor() {
                    super();
                    const shadow = this.attachShadow({ mode: 'open' });
                    
                    const wrapper = document.createElement('div');
                    wrapper.setAttribute('class', 'wrapper');
                    wrapper.innerHTML = `
                        <p>¡Estoy dentro del Shadow DOM!</p>
                        <button>Botón Interno</button>
                    `;

                    const style = document.createElement('style');
                    style.textContent = `
                        .wrapper { background-color: #e0f7fa; color: #00796b; padding: 10px; border-radius: 4px; border: 1px dashed #00796b; }
                        button { background-color: #00796b; color: white; border: none; padding: 5px 10px; border-radius: 3px; }
                    `;
                    shadow.appendChild(style);
                    shadow.appendChild(wrapper);
                }
            }
            customElements.define('shadow-dom-test', ShadowDomTest);

            // --- Lógica para el CSS HOUDINI PAINT API ---
            if ('paintWorklet' in CSS) {
                CSS.paintWorklet.addModule(`data:text/javascript,
                    class CheckerboardPainter {
                        paint(ctx, size) {
                            ctx.fillStyle = 'rebeccapurple';
                            ctx.fillRect(0, 0, size.width / 2, size.height / 2);
                            ctx.fillRect(size.width / 2, size.height / 2, size.width / 2, size.height / 2);
                        }
                    }
                    registerPaint('checkerboard', CheckerboardPainter);
                `);
            }
        });
    </script>
<script type="module" src="theme-generator.js"></script>
</body>
</html>